[gd_scene load_steps=4 format=3 uid="uid://bcvsggtaoba6w"]

[ext_resource type="PackedScene" uid="uid://b45ghbmqumlpg" path="res://scenes/weapons/melee.tscn" id="1_iico5"]
[ext_resource type="Texture2D" uid="uid://dh7e5o0odeshl" path="res://assets/sprites/feedbacker.png" id="2_t2mp6"]

[sub_resource type="GDScript" id="GDScript_rkyh5"]
script/source = "extends Melee


func deal_damage():
	if hitbox.get_overlapping_bodies() != []:
		for body in hitbox.get_overlapping_bodies():
			
			if body is Player:
				if body == player:
					continue 
				main_scene.rpc(\"hurt_player\", body.name, damage)
				return
				
			if body is Bullet:
				if body.bullet_owner == player:
					continue
				body.bullet_owner = player
				body.look_at(body.get_local_mouse_position())
				body.update_direction(body.rotation)
				
				main_scene.rpc(\"change_bullet_property\", \"bullet_owner\", body.get_index(), player)
				main_scene.rpc(\"change_bullet_owner\", \"bullet_rotation\", body.get_index(), body.rotation)
				#print(get_local_mouse_position())
				
"

[node name="Feedbacker" instance=ExtResource("1_iico5")]
script = SubResource("GDScript_rkyh5")
damage = 10
flip_enabled = false

[node name="Sprite2D" parent="Hand" index="0"]
rotation = 1.57079
scale = Vector2(3, 3)
texture = ExtResource("2_t2mp6")

[node name="HitBox" parent="Hand" index="1"]
collision_mask = 6
